<h1 class="mb-4"><%= @list.name %></h1>

<%= link_to "Add a movie", new_list_bookmark_path(@list), class: "btn btn-primary mb-3" %>




<% if @bookmarks.any? %>
  <div id="moviesCarousel" class="carousel slide mt-5" data-bs-ride="carousel">
    <div class="carousel-indicators">
      <% @bookmarks.each_with_index do |bookmark, index| %>
        <button type="button" data-bs-target="#moviesCarousel" data-bs-slide-to="<%= index %>"
                class="<%= 'active' if index == 0 %>"
                aria-current="<%= 'true' if index == 0 %>"
                aria-label="Slide <%= index + 1 %>"></button>
      <% end %>
    </div>
    <div class="carousel-inner">
      <% @bookmarks.each_with_index do |bookmark, index| %>
        <div class="carousel-item <%= 'active' if index == 0 %>">
          <img src="<%= bookmark.movie.poster_url %>" class="d-block w-100" alt="<%= bookmark.movie.title %>" style="max-height: 600px; object-fit: contain; background-color: #000;">
          <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-75 rounded p-3">
            <h5><%= bookmark.movie.title %></h5>
            <p><%= truncate(bookmark.movie.overview, length: 150) %></p>
            <p><strong>Note:</strong> <%= bookmark.movie.rating %>/10</p>
            <p><em>"<%= bookmark.comment %>"</em></p>
          </div>
        </div>
      <% end %>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#moviesCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#moviesCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
<% end %>

<%= link_to "Add a movie", new_list_bookmark_path(@list), class: "btn btn-primary mb-3" %>

<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4 mb-4">
  <% @bookmarks.each do |bookmark| %>
    <div class="col">
      <div class="card h-100 shadow-sm">
        <img src="<%= bookmark.movie.poster_url %>" class="card-img-top" alt="<%= bookmark.movie.title %>" style="height: 400px; object-fit: cover;">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title"><%= bookmark.movie.title %></h5>
          <p class="card-text text-muted small flex-grow-1"><%= truncate(bookmark.movie.overview, length: 100) %></p>
          <div class="mb-2">
            <span class="badge bg-warning text-dark">‚≠ê <%= bookmark.movie.rating %></span>
          </div>
          <p class="card-text fst-italic small text-secondary">"<%= truncate(bookmark.comment, length: 80) %>"</p>
          <%= link_to "Delete", bookmark_path(bookmark), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: "btn btn-outline-danger btn-sm w-100" %>
        </div>
      </div>
    </div>
  <% end %>
</div>

<%= link_to "Back to lists", lists_path, class: "btn btn-secondary" %>
